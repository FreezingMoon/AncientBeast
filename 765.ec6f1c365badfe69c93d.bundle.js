"use strict";(self.webpackChunkancientbeast=self.webpackChunkancientbeast||[]).push([[765],{99765:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var a=r(4942),i=r(42982),n=r(16255),s=r(83355),c=r(65482),u=r(68861),o=r(67790);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const g=function(e){e.abilities[7]=[{trigger:"onOtherDamage",require:function(e){return!!this.testRequirements()&&(void 0===e&&(e={type:"target"}),!0)},activate:function(t,r){this.creature.id===t.attacker.id&&(r.addEffect(new u.Q("Burning Spirit",this.creature,r,"",{alterations:{burn:-1}},e)),r.stats.burn-=1,this.isUpgraded()&&this.creature.addEffect(new u.Q("Burning Heart",this.creature,this.creature,"",{alterations:{burn:1}},e)))}},{trigger:"onQuery",_targetTeam:s.S.Enemy,require:function(){return!!this.testRequirements()&&!!this.testDirection({team:this._targetTeam,distance:this._getDistance(),sourceCreature:this.creature})},query:function(){var t=this,r=this.creature;e.grid.queryDirection({fnOnConfirm:function(){t.animation.apply(t,arguments)},flipped:r.player.flipped,team:this._targetTeam,id:this.creature.id,requireCreature:!0,x:r.x,y:r.y,distance:this._getDistance(),distanceFalloff:this.range.regular,sourceCreature:r})},activate:function(t,r){var a=o.Z$(t).creature;this.end(),e.Phaser.camera.shake(.01,100,!0,e.Phaser.camera.SHAKE_HORIZONTAL,!0);var i=this.creature.sprite.scale.x>0?232:52,n=e.animations.projectile(this,a,"effects_fiery-touch",t,r,i,-20),s=n[0],c=n[1],u=this._getDamage(t);s.onComplete.add((function(){this.destroy(),a.takeDamage(u)}),c)},getAnimationData:function(){return{duration:425}},_getDistance:function(){return this.isUpgraded()?this.range.upgraded:this.range.regular},_getDamage:function(t){var r=o.B0((0,i.Z)(t),!1,!1).length,a=h(h({},this.damages),{},{slash:r>=this.range.regular?0:this.damages.slash});return new n.h(this.creature,a,1,[],e)}},{trigger:"onQuery",range:6,require:function(){return this.testRequirements()},query:function(){var t=this,r=this.creature;r.queryMove({noPath:!0,isAbility:!0,range:e.grid.getFlyingRange(r.x,r.y,this.range,r.size,r.id),callback:function(e,r){e.x!=r.creature.x||e.y!=r.creature.y?(delete arguments[1],t.animation.apply(t,arguments)):t.query()}})},activate:function(t){var r=this;r.end(),this.isUpgraded()&&(this.range+=1),r.getTargets(r.creature.adjacentHexes(1)).forEach((function(e){e.target,c.j}));var a=function(t,a){var i=a;a instanceof c.j||(i=a.creature),i.takeDamage(new n.h(t.attacker,r.damages,1,[],e),{isFromTrap:!0}),this.trap.destroy(),t.deleteEffect()},i=function(){var e=this.trap.hex.creature,t=e&&e.type||null;return 0!==e&&t!==r.creature.type},s=this.creature;s.hexagons.forEach((function(t){t.createTrap("firewall",[new u.Q("Firewall",s,t,"onStepIn",{requireFn:i,effectFn:a,attacker:s},e)],s.player,{turnLifetime:1,ownerCreature:s,fullTurnLifetime:!0})})),r.creature.moveTo(t,{ignoreMovementPoint:!0,ignorePath:!0,animation:"teleport",callback:function(){e.activeCreature.queryMove()}})}},{trigger:"onQuery",require:function(){return this.testRequirements()},query:function(){var t=this,r=this.creature.adjacentHexes(1);e.grid.queryHexes({fnOnConfirm:function(){t.animation.apply(t,arguments)},fnOnSelect:function(t){r.forEach((function(t){t.cleanOverlayVisualState(),t.overlayVisualState("creature selected player"+e.activeCreature.team)})),t.cleanOverlayVisualState(),t.overlayVisualState("creature selected player"+e.activeCreature.team)},id:this.creature.id,hexes:r,hideNonTarget:!0})},activate:function(){var t=this;t.end();var r=this.creature.adjacentHexes(1),a=t.getTargets(r);this.isUpgraded()&&(this.damages.burn=30),a.forEach((function(r){r.target.takeDamage(new n.h(t.creature,t.damages,1,[],e))}))}}]}},68861:(e,t,r)=>{r.d(t,{Q:()=>c});var a=r(15671),i=r(43144),n=r(19755),s=r(65482),c=function(){function e(t,r,i,s,c,u){(0,a.Z)(this,e),this.id=u.effectId++,this.game=u,this.name=t,this.owner=r,this.target=i,this.trigger=s,this.creationTurn=u.turn;var o=n.extend({requireFn:function(){return!0},effectFn:function(){},alterations:{},turnLifetime:0,deleteTrigger:"onStartOfRound",stackable:!0,noLog:!1,specialHint:void 0,deleteOnOwnerDeath:!1},c);n.extend(this,o),u.effects.push(this)}return(0,i.Z)(e,[{key:"animation",value:function(){this.activate.apply(this,arguments)}},{key:"activate",value:function(e){if(!this.requireFn(e))return!1;this.noLog||console.log("Effect "+this.name+" triggered"),e instanceof s.j&&e.addEffect(this),this.effectFn(this,e)}},{key:"deleteEffect",value:function(){var e=this.target.effects.indexOf(this);this.target.effects[e]?this.target.effects.splice(e,1):console.warn("Failed to find effect on target.",this);var t=this.game.effects.indexOf(this);this.game.effects[t]?this.game.effects.splice(t,1):console.warn("Failed to find effect on game.",this),this.target.updateAlteration()}}]),e}()}}]);