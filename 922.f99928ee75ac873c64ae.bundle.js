"use strict";(self.webpackChunkancientbeast=self.webpackChunkancientbeast||[]).push([[922],{98922:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var i=r(19755),a=r(16255),n=r(83355),s=r(23315),u=r(67790),o=r(68861);const c=function(e){e.abilities[37]=[{trigger:"onCreatureMove",require:function(t){return!!this.testRequirements()&&(null==t&&(t=this.creature.hexagons[0]),this.message="",t.trap&&"mud-bath"==t.trap.type?(e.UI.abilitiesButtons[0].changeState("noclick"),!0):(this.message="Not in a mud bath.",this.creature.effects.forEach((function(e){"mud-bath"==e.trigger&&e.deleteEffect()})),!1))},activate:function(){var t=i.extend({},this.effects[0]);if(this.isUpgraded())for(var r in t)({}).hasOwnProperty.call(t,r)&&(t[r]=2*t[r]);var a=new o.Q("Spa Goggles",this.creature,this.creature,"mud-bath",{alterations:t},e);this.creature.addEffect(a);var n,s="%CreatureName"+this.creature.id+"%'s ",u=!0;for(var c in t)({}).hasOwnProperty.call(t,c)&&(u||(s+="and "),s+=c+" ",u=!1,n=t[c]);s+="+"+n,e.log(s)}},{trigger:"onQuery",_targetTeam:n.S.Enemy,require:function(){return!!this.testRequirements()&&!!this.atLeastOneTarget(this.creature.adjacentHexes(1),{team:this._targetTeam})},query:function(){var t=this,r=this.creature;e.grid.queryDirection({fnOnConfirm:function(){t.animation.apply(t,arguments)},flipped:r.player.flipped,team:this._targetTeam,id:r.id,requireCreature:!0,x:r.x,y:r.y,sourceCreature:r,stopOnCreature:!1,distance:1})},activate:function(t,r){var i=this;i.end(),e.Phaser.camera.shake(.01,100,!0,e.Phaser.camera.SHAKE_HORIZONTAL,!0);var n=u.Z$(t).creature,s=new a.h(i.creature,i.damages,1,[],e);if(!n.takeDamage(s).kill){var o=e.grid.getHexLine(n.x,n.y,r.direction,n.flipped);o.splice(0,1);for(var c=null,h=0;h<o.length&&o[h].isWalkable(n.size,n.id,!0)&&(c=o[h],this.isUpgraded());h++){for(var g=!0,d=0;d<n.size;d++){var f=e.grid.hexes[c.y][c.x-d];if(!f.trap||"mud-bath"!==f.trap.type){g=!1;break}}if(!g)break}null!==c&&n.moveTo(c,{callback:function(){e.activeCreature.queryMove()},ignoreMovementPoint:!0,ignorePath:!0,overrideSpeed:800,animation:"push"})}}},{trigger:"onQuery",_targetTeam:n.S.Enemy,require:function(){if(!this.testRequirements())return!1;var t=s.IA,r=s.hi,i=this.creature,a=u.B0(e.grid.getHexMap(i.x,i.y-2,0,!1,t),!0,!0,i.id,i.team).concat(u.B0(e.grid.getHexMap(i.x,i.y,0,!1,r),!0,!0,i.id,i.team),u.B0(e.grid.getHexMap(i.x,i.y,0,!1,t),!0,!0,i.id,i.team),u.B0(e.grid.getHexMap(i.x,i.y-2,0,!0,t),!0,!0,i.id,i.team),u.B0(e.grid.getHexMap(i.x,i.y,0,!0,r),!0,!0,i.id,i.team),u.B0(e.grid.getHexMap(i.x,i.y,0,!0,t),!0,!0,i.id,i.team));return!!this.atLeastOneTarget(a,{team:this._targetTeam})},query:function(){var t=s.IA,r=s.hi,i=this,a=this.creature,n=[e.grid.getHexMap(a.x,a.y-2,0,!1,t),e.grid.getHexMap(a.x,a.y,0,!1,r),e.grid.getHexMap(a.x,a.y,0,!1,t),e.grid.getHexMap(a.x,a.y-2,0,!0,t),e.grid.getHexMap(a.x,a.y,0,!0,r),e.grid.getHexMap(a.x,a.y,0,!0,t)];n.forEach((function(e){u.B0(e,!0,!0,a.id)})),e.grid.queryChoice({fnOnConfirm:function(){i.animation.apply(i,arguments)},team:this._targetTeam,requireCreature:1,id:a.id,flipped:a.flipped,choices:n})},activate:function(t){var r=this;r.end(),e.Phaser.camera.shake(.01,60,!0,e.Phaser.camera.SHAKE_HORIZONTAL,!0);var i=u.Z$(t).creature;if(this.isUpgraded()){var n=new o.Q("Ground Ball",r.creature,i,"onDamage",{alterations:{meditation:-1}},e);i.addEffect(n),e.log("%CreatureName"+i.id+"%'s meditation is lowered by 1")}var s=new a.h(r.creature,r.damages,1,[],e);i.takeDamage(s)}},{trigger:"onQuery",_energyNormal:30,_energySelfUpgraded:10,require:function(){return this.isUpgraded()?(this.requirements={energy:this._energySelfUpgraded},this.costs={energy:this._energySelfUpgraded}):(this.requirements={energy:this._energyNormal},this.costs={energy:this._energyNormal}),this.testRequirements()},query:function(){var t=this,r=this.creature,i=[];this.isUpgraded()&&this.creature.energy<this._energyNormal||(i=e.grid.getFlyingRange(r.x,r.y,50,1,0)),i.push(e.grid.hexes[r.y][r.x]),e.grid.queryHexes({fnOnCancel:function(){e.activeCreature.queryMove()},fnOnConfirm:function(){t.animation.apply(t,arguments)},hexes:i,hideNonTarget:!0})},activate:function(t){var r=this,i=this.creature,a=t.x===i.x&&t.y===i.y;this.isUpgraded()&&a?(this.requirements={energy:this._energySelfUpgraded},this.costs={energy:this._energySelfUpgraded}):(this.requirements={energy:this._energyNormal},this.costs={energy:this._energyNormal}),r.end();var n=[new o.Q("Slow Down",r.creature,t,"onStepIn",{requireFn:function(){return!!this.trap.hex.creature&&"A1"!=this.trap.hex.creature.type},effectFn:function(e,t){t.remainingMove--}},e)];t.createTrap("mud-bath",n,r.creature.player),e.soundsys.playSound(e.soundLoaded[7],e.soundsys.effectsGainNode),a&&e.onCreatureMove(i,t)}}]}},68861:(e,t,r)=>{r.d(t,{Q:()=>u});var i=r(15671),a=r(43144),n=r(19755),s=r(65482),u=function(){function e(t,r,a,s,u,o){(0,i.Z)(this,e),this.id=o.effectId++,this.game=o,this.name=t,this.owner=r,this.target=a,this.trigger=s,this.creationTurn=o.turn;var c=n.extend({requireFn:function(){return!0},effectFn:function(){},alterations:{},turnLifetime:0,deleteTrigger:"onStartOfRound",stackable:!0,noLog:!1,specialHint:void 0,deleteOnOwnerDeath:!1},u);n.extend(this,c),o.effects.push(this)}return(0,a.Z)(e,[{key:"animation",value:function(){this.activate.apply(this,arguments)}},{key:"activate",value:function(e){if(!this.requireFn(e))return!1;this.noLog||console.log("Effect "+this.name+" triggered"),e instanceof s.j&&e.addEffect(this),this.effectFn(this,e)}},{key:"deleteEffect",value:function(){var e=this.target.effects.indexOf(this);this.target.effects[e]?this.target.effects.splice(e,1):console.warn("Failed to find effect on target.",this);var t=this.game.effects.indexOf(this);this.game.effects[t]?this.game.effects.splice(t,1):console.warn("Failed to find effect on game.",this),this.target.updateAlteration()}}]),e}()}}]);