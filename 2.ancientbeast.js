(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{319:function(e,t,r){"use strict";r.r(t);var a=r(113),i=r(27),n=r(43),s=r(11),u=r(114),c=r(980);t.default=function(e){e.abilities[3]=[{triggerFunc:function(){return this.isUpgraded()?"onUnderAttack onAttack":"onUnderAttack"},priority:10,require:function(e){return!!this.testRequirements()&&(!e||void 0===e.melee||e.melee&&!e.isFromTrap)},activate:function(t){var r=this.creature;if(t&&t.melee){var a=t.attacker===r?t.target:t.attacker,i={alterations:this.effects[0],creationTurn:e.turn-1,stackable:!0};this.end();var n=new u.a(this.title,r,a,"",i,e);a.addEffect(n,void 0,"Contaminated"),e.log("%CreatureName"+a.id+"%'s regrowth is lowered by "+this.effects[0].regrowth),this.setUsed(!1)}}},{trigger:"onQuery",_targetTeam:i.a.enemy,require:function(){return!!this.testRequirements()&&!!this.atLeastOneTarget(this.creature.getHexMap(n.i),{team:this._targetTeam})},query:function(){var t=this.creature,r=this;e.grid.queryCreature({fnOnConfirm:function(){r.animation.apply(r,arguments)},team:this._targetTeam,id:t.id,flipped:t.flipped,hexes:t.getHexMap(n.i)})},activate:function(t){this.end();var r=new a.a(this.creature,this.damages,1,[],e),i=t.takeDamage(r);if(""===i.damageObj.status){var n=i.damages.total;if(this.isUpgraded()){var s=this.creature.stats.health-this.creature.health;if(s>0){var c=Math.min(n,s);n-=c,this.creature.heal(c,!1)}}n>0&&this.creature.addEffect(new u.a(this.title,this.creature,this.creature,"",{turnLifetime:1,deleteTrigger:"onStartPhase",alterations:{regrowth:n}},e),"%CreatureName"+this.creature.id+"% gained "+n+" regrowth for now","Regrowth++")}this.creature.effects.forEach((function(e){"Frogger Bonus"==e.name&&e.deleteEffect()}))}},{trigger:"onQuery",require:function(){return this.creature.stats.moveable?this.testRequirements()&&this.creature.stats.moveable:(this.message=e.msg.abilities.notMoveable,!1)},fnOnSelect:function(e){this.creature.tracePosition({x:e.x,y:e.y,overlayClass:"creature moveto selected player"+this.creature.team})},query:function(){var t=this,r=this.creature,a=!this.isUpgraded()||this._isSecondLowJump(),i=this._getHexRange(a);e.grid.queryHexes({fnOnSelect:function(){t.fnOnSelect.apply(t,arguments)},fnOnConfirm:function(){arguments[0].x!=t.creature.x||arguments[0].y!=t.creature.y?t.animation.apply(t,arguments):t.query()},size:r.size,flipped:r.player.flipped,id:r.id,hexes:i,hexesDashed:[],hideNonTarget:!0})},activate:function(t){var r=this;if(r.end(!1,!0),this.isUpgraded()&&!this._isSecondLowJump()){for(var a=this._getHexRange(!0),i=!1,n=0;n<a.length;n++)a[n].x===t.x&&a[n].y===t.y&&(i=!0);i&&this.setUsed(!1)}r.creature.moveTo(t,{ignoreMovementPoint:!0,ignorePath:!0,callback:function(){e.Phaser.camera.shake(.02,100,!0,e.Phaser.camera.SHAKE_VERTICAL,!0),e.onStepIn(r.creature,r.creature.hexagons[0]);var t=setInterval((function(){e.freezedInput||(clearInterval(t),e.UI.selectAbility(-1),e.activeCreature.queryMove())}),100)}}),r.creature.addEffect(new u.a("Offense Bonus",r.creature,r.creature,"onStepIn onEndPhase",{effectFn:function(e){e.deleteEffect()},alterations:r.effects[0]},e))},_getHexRange:function(t){var r=this.creature,a=e.grid.getHexMap(r.x,r.y,0,!1,n.q);a=s.b(a,!1,t,r.id);var i=e.grid.getHexMap(r.x,r.y,0,!0,n.q);i=s.b(i,!1,t,r.id);for(var u=a.concat(i).sort((function(e,t){return e.x-t.x})),c=0,o=0;o<u.length;o++)0===o||u[o-1].x+1===u[o].x?c++:(c<this.creature.size&&(u.splice(o-c,c),o-=c),c=1);return c<this.creature.size&&u.splice(u.length-c,c),u},_isSecondLowJump:function(){return 1===this.timesUsedThisTurn}},{trigger:"onQuery",_targetTeam:i.a.enemy,require:function(){if(!this.testRequirements())return!1;var t=e.grid.getHexMap(this.creature.x-2,this.creature.y-2,0,!1,n.i);return!!this.atLeastOneTarget(t,{team:this._targetTeam})},query:function(){var t=this,r=this.creature;e.grid.queryCreature({fnOnConfirm:function(){t.animation.apply(t,arguments)},team:this._targetTeam,id:r.id,flipped:r.flipped,hexes:e.grid.getHexMap(r.x-2,r.y-2,0,!1,n.i)})},activate:function(t){this.end();var r=new a.a(this.creature,this.damages,1,[],e),i=t.takeDamage(r);if(this.isUpgraded()&&!i.kill){var n=t.x-this.creature.x,s=t.y-this.creature.y,u=Object(c.a)(t.y,n,s),o=e.grid.getHexLine(t.x,t.y,u,t.flipped);o.length>=2&&o[1].isWalkable(t.size,t.id,!0)&&t.moveTo(o[1],{callback:function(){e.activeCreature.queryMove()},ignoreMovementPoint:!0,ignorePath:!0,overrideSpeed:500,animation:"push"})}this.creature.effects.forEach((function(e){"Offense Bonus"==e.name&&e.deleteEffect()}))}}]}},980:function(e,t,r){"use strict";function a(e,t,r){var a;return t>1&&(t=1),t<-1&&(t=-1),0===r?a=1===t?1:4:(e%2==0&&t<1&&t++,a=1===t?-1===r?0:2:1===r?3:5),a}r.d(t,"a",(function(){return a}))}}]);