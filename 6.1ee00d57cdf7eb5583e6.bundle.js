(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{323:function(e,t,i){"use strict";i.r(t);var a=i(42),r=i.n(a),n=i(120),s=i(24),c=i(48),u=i(8),o=(i(5),i(989)),h=i(14);t.default=function(e){e.abilities[39]=[{trigger:"onStartPhase onEndPhase",_targetTeam:s.a.Enemy,require:function(){return this.creature===this.game.activeCreature&&(!this.creature.materializationSickness&&(!!this.atLeastOneTarget(this._getHexes(),{team:this._targetTeam})&&this.testRequirements()))},activate:function(){this.end();var t=this._getHexes()[0].creature;this.isUpgraded()&&t.addFatigue(t.endurance);var i=new o.a(this.title,this.creature,t,"",{stackable:!0,alterations:{endurance:-5}},e);t.addEffect(i,"%CreatureName".concat(t.id,"% loses -5 endurance")),this.game.UI.updateFatigue()},_getHexes:function(){return this.creature.getHexMap(c.o)}},{trigger:"onQuery",_targetTeam:s.a.Enemy,require:function(){var e=this.creature;return!!this.testRequirements()&&!!this.atLeastOneTarget(e.getHexMap(c.j),{team:this._targetTeam})},query:function(){var t=this,i=this.creature;e.grid.queryCreature({fnOnConfirm:function(){t.animation.apply(t,arguments)},team:this._targetTeam,id:i.id,flipped:i.flipped,hexes:i.getHexMap(c.j)})},activate:function(t){this.end();var i={pierce:11};if(i.pierce=t.endurance<=0?2*i.pierce:i.pierce,this.isUpgraded()){var a=this.creature.stats.endurance-t.stats.endurance;a>0&&(i.pierce+=a)}var r=new n.a(this.creature,i,1,[],e);t.takeDamage(r)}},{trigger:"onQuery",_targetTeam:s.a.Both,_directions:[0,1,0,0,1,0],require:function(){var t=this.creature;return!!this.testRequirements()&&(t.stats.moveable?!!this.testDirection({team:this._targetTeam,sourceCreature:t,flipped:t.player.flipped,directions:this._directions,distance:this._getMaxDistance(),minDistance:this.range.minimum,optTest:function(e){return e.stats.moveable}}):(this.message=e.msg.abilities.notMoveable,!1))},query:function(){var t=this,i=this.creature;e.grid.queryDirection({fnOnConfirm:function(){t.animation.apply(t,arguments)},team:this._targetTeam,id:i.id,sourceCreature:i,flipped:i.player.flipped,x:i.x,y:i.y,directions:this._directions,distance:this._getMaxDistance(),minDistance:this.range.minimum,optTest:function(e){return e.stats.moveable}})},activate:function(t,i){var a=this.creature,n=u.e(t).creature,s=r()(t);s=s.filter((function(e){return!e.creature}));var o=(i.direction===h.a.Left?u.a:u.b)(this.creature.getHexMap(c.p,this.isTargetingBackwards(i.direction)),this.range.minimum-1,this.game.grid);s=u.g([].concat(r()(o),r()(s)),i.direction===h.a.Right?h.a.Left:h.a.Right),this.end(),a.faceHex(n),u.c(s,!1,!1);var f,g,d=null,l=null;if(1===n.size)l=s[0];else if(2===n.size){var m=Math.floor((s.length-1)/2);d=s[m],m<s.length-1&&(l=s[m+1])}else d=u.e(s);d&&(f=i.direction===h.a.Left?d.x+a.size-1:d.x,g=e.grid.hexes[d.y][f],a.moveTo(g,{ignoreMovementPoint:!0,ignorePath:!0,callback:function(){var t=setInterval((function(){e.freezedInput||(clearInterval(t),e.activeCreature.queryMove(),a.facePlayerDefault())}),100)}})),l&&(f=i.direction===h.a.Right?l.x+n.size-1:l.x,g=e.grid.hexes[l.y][f],n.moveTo(g,{ignoreMovementPoint:!0,ignorePath:!0,callback:function(){var t=setInterval((function(){e.freezedInput||(clearInterval(t),e.activeCreature.queryMove(),a.facePlayerDefault())}),100)}}))},_getMaxDistance:function(){return this.isUpgraded()?this.range.upgraded:this.range.regular}},{trigger:"onQuery",damages:{slash:10,crush:5},_getHexes:function(){return this.isUpgraded()?c.m:c.l},require:function(){return!!this.testRequirements()},query:function(){var t=this,i=this.creature,a=this._getHexes();e.grid.queryChoice({fnOnConfirm:function(){t.animation.apply(t,arguments)},team:s.a.Both,requireCreature:0,id:i.id,flipped:i.player.flipped,choices:[i.getHexMap(a),i.getHexMap(a,!0)]})},activate:function(e){var t={slash:10};this.end(),this.areaDamage(this.creature,t,[],this.getTargets(e),!0),this.areaDamage(this.creature,t,[],this.getTargets(e))}}]}},989:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var a=i(3),r=i.n(a),n=i(4),s=i.n(n),c=i(0),u=i(5),o=function(){function e(t,i,a,n,s,u){r()(this,e),this.id=u.effectId++,this.game=u,this.name=t,this.owner=i,this.target=a,this.trigger=n,this.creationTurn=u.turn;var o=c.extend({requireFn:function(){return!0},effectFn:function(){},alterations:{},turnLifetime:0,deleteTrigger:"onStartOfRound",stackable:!0,noLog:!1,specialHint:void 0,deleteOnOwnerDeath:!1},s);c.extend(this,o),u.effects.push(this)}return s()(e,[{key:"animation",value:function(){this.activate.apply(this,arguments)}},{key:"activate",value:function(e){if(!this.requireFn(e))return!1;this.noLog||console.log("Effect "+this.name+" triggered"),e instanceof u.a&&e.addEffect(this),this.effectFn(this,e)}},{key:"deleteEffect",value:function(){var e=this.target.effects.indexOf(this);this.target.effects[e]?this.target.effects.splice(e,1):console.warn("Failed to find effect on target.",this);var t=this.game.effects.indexOf(this);this.game.effects[t]?this.game.effects.splice(t,1):console.warn("Failed to find effect on game.",this),this.target.updateAlteration()}}]),e}()}}]);